"use strict";(self["webpackChunkcamping"]=self["webpackChunkcamping"]||[]).push([[152],{4973:function(e,t,n){n.r(t),n.d(t,{default:function(){return U}});var o=n(3396);const a=e=>((0,o.dD)("data-v-45ddacce"),e=e(),(0,o.Cn)(),e),r={class:"user-manage-container"},i=a((()=>(0,o._)("div",{class:"user-manage-title"},[(0,o._)("h2",null,"유저 관리 페이지")],-1))),s={class:"user-manage-table"};function c(e,t,n,a,c,l){const u=(0,o.up)("UserTable");return(0,o.wg)(),(0,o.iD)("div",r,[i,(0,o._)("div",s,[(0,o.Wm)(u,{userData:e.userData,"onUpdate:userData":t[0]||(t[0]=t=>e.userData=t),perPage:e.perPage},null,8,["userData","perPage"])])])}var l=n(7139);const u=e=>((0,o.dD)("data-v-0782e714"),e=e(),(0,o.Cn)(),e),m={class:"table"},d={class:"table-header row"},p={class:"table-column"},h={class:"excel-export-container"},f={class:"table-body row"},g=u((()=>(0,o._)("input",{type:"checkbox",name:"checkedUser",value:""},null,-1))),y={class:"table-column"},v={key:0},P={key:1},D={key:2};function b(e,t,n,a,r,i){const s=(0,o.up)("Sort"),c=(0,o.up)("Filtering"),u=(0,o.up)("ExcelExport"),b=(0,o.up)("TableButton"),w=(0,o.up)("Pagination"),k=(0,o.up)("ModifyModal");return(0,o.wg)(),(0,o.iD)("div",m,[(0,o._)("ul",null,[(0,o._)("li",d,[(0,o._)("input",{onClick:t[0]||(t[0]=e=>i.checkAll(e)),type:"checkbox",name:"checkedUser",value:""}),((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(e.columns,(t=>((0,o.wg)(),(0,o.iD)("div",p,[(0,o.Uk)((0,l.zw)(t.name)+" ",1),t.sortable?((0,o.wg)(),(0,o.j4)(s,{key:0,column:t.prop,onSort:i.getSortData},null,8,["column","onSort"])):(0,o.kq)("",!0),(0,o.Wm)(c,{datas:e.rows,column:t.prop,type:t.type,onFilterData:i.filterData},null,8,["datas","column","type","onFilterData"])])))),256)),(0,o._)("div",h,[(0,o.Wm)(u,{inputData:e.rows},null,8,["inputData"])])]),((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(e.rows,((t,n)=>((0,o.wg)(),(0,o.iD)("li",f,[g,((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(e.columns,(n=>((0,o.wg)(),(0,o.iD)("div",y,[n.type!=Date&&"status"!=n.prop?((0,o.wg)(),(0,o.iD)("div",v,(0,l.zw)(t[n.prop]),1)):(0,o.kq)("",!0),n.type==Date&&"status"!=n.prop?((0,o.wg)(),(0,o.iD)("div",P,(0,l.zw)(e.$filters.formatDate(t[n.prop])),1)):(0,o.kq)("",!0),n.type!=Date&&"status"==n.prop?((0,o.wg)(),(0,o.iD)("div",D,(0,l.zw)(e.$filters.formatMemberStatus(t[n.prop])),1)):(0,o.kq)("",!0)])))),256)),e.modifybtn?((0,o.wg)(),(0,o.j4)(b,{key:0,type:"modify",onModify:e=>i.modify(t,n)},null,8,["onModify"])):(0,o.kq)("",!0),e.removebtn?((0,o.wg)(),(0,o.j4)(b,{key:1,type:"remove",onRemove:e=>i.remove(t,n)},null,8,["onRemove"])):(0,o.kq)("",!0),(0,o.Wm)(b,{type:"limit",onLimit:e=>i.limit(t,n)},null,8,["onLimit"]),(0,o.Wm)(b,{type:"active",onActive:e=>i.active(t,n)},null,8,["onActive"])])))),256))]),(0,o.Wm)(w,{startPage:i.startPage,endPage:i.endPage,totalPage:e.totalPage,onChangePage:i.changePage},null,8,["startPage","endPage","totalPage","onChangePage"]),e.isModify?((0,o.wg)(),(0,o.j4)(k,{key:0,columns:e.columns,modifyData:e.modifyData,onCancelModify:i.cancelModify,onConfirmModify:e.confirmModify},null,8,["columns","modifyData","onCancelModify","onConfirmModify"])):(0,o.kq)("",!0)])}n(7658);var w=n(3511),k=n(1157),x=n(2361),T=n(9499),C=n(2492),B=n.n(C),S=n(6582),M=n(6606),j={props:["userData","perPage"],data:function(){return{columns:[{name:"닉네임",prop:"nickname",sortable:!0,size:"200px",type:String},{name:"이메일",prop:"email",sortable:!0,type:String},{name:"성별",prop:"sex",type:String},{name:"연락처",prop:"phoneNumber",type:String},{name:"가입일",prop:"regdate",type:Date},{name:"상태",prop:"status",type:Number}],rows:[],totalPage:0,currentPage:1,modifybtn:!0,removebtn:!0,isModify:!1,modifyData:{}}},created:function(){let e=Object.keys(this.userData).length;this.totalPage=e<=20?1:Math.ceil(e/this.perPage);for(let t=0;t<this.perPage;t++){if(Object.keys(this.userData).length<=t)break;console.log(t),this.rows.push(this.userData[t])}},mounted:function(){this.changeColumnSize()},computed:{endPage:function(){return this.totalPage<this.startPage+9?this.totalPage%10:10},startPage:function(){return this.currentPage<=10?1:this.currentPage-this.currentPage%10+1}},methods:{getSortData:function(e,t){console.log(e,t),this.sortJSON(this.rows,e,t)},sortJSON:function(e,t,n){return void 0==n&&(n="asc"),e.sort((function(e,o){var a=e[t],r=o[t];return"desc"==n?a>r?-1:a<r?1:0:"asc"==n?a<r?-1:a>r?1:0:void 0}))},filterData:function(e){console.log("filtering data ",e),this.rows=e},checkAll:function(e){if(e.target.checked)for(let t of document.querySelectorAll('input[type="checkbox"]'))t.checked=!0;else for(let t of document.querySelectorAll('input[type="checkbox"]'))t.checked=!1},changePage:function(e){this.currentPage=e},changeColumnSize:function(){let e="40px";for(let t of this.columns)Object.keys(t).includes("size")?e=e+" "+t.size:e+=" minmax(200px,1fr)";this.modifybtn&&(e+=" 25px"),this.removebtn&&(e+=" 25px"),e+=" 25px 25px",document.querySelector(".table").style.setProperty("--gridTemplate",e)},modify:function(e,t){this.modifyData=e,this.isModify=!0},remove:function(e,t){B().fire({title:"회원정보를 삭제하시겠습니까?",text:"회원정보가 영구히 삭제됩니다.",showCancelButton:!0,confirmButtonText:"삭제",cancelButtonText:"취소"}).then((n=>{n.isConfirmed&&fetch("http://localhost:8087/java/member",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e.email,auth:1,status:0})}).then((e=>e.text())).then((e=>{"true"==e?B().fire({icon:"success",title:"탈퇴 적용 완료 !",toast:!0,position:"center-center",showConfirmButton:!1,timer:1500,timerProgressBar:!0,didOpen:e=>{e.addEventListener("mouseenter",B().stopTimer),e.addEventListener("mouseleave",B().resumeTimer),this.userData[t].status=0}}):B().fire({icon:"error",title:"탈퇴 적용 실패 !",text:"알수없는 오류로 탈퇴 적용이 실패하였습니다.",toast:!0,position:"center-center",showConfirmButton:!1,timer:1500,timerProgressBar:!0,didOpen:e=>{e.addEventListener("mouseenter",B().stopTimer),e.addEventListener("mouseleave",B().resumeTimer)}})}))}))},limit:function(e,t){B().fire({title:"회원 접근을 제한하시겠습니까?",text:"회원의 접근이 제한됩니다.",showCancelButton:!0,confirmButtonText:"제한",cancelButtonText:"취소"}).then((n=>{n.isConfirmed&&fetch("http://localhost:8087/java/member",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e.email,auth:1,status:1})}).then((e=>e.text())).then((e=>{"true"==e?B().fire({icon:"success",title:"접속 제한 적용 !",toast:!0,position:"center-center",showConfirmButton:!1,timer:1500,timerProgressBar:!0,didOpen:e=>{e.addEventListener("mouseenter",B().stopTimer),e.addEventListener("mouseleave",B().resumeTimer),this.userData[t].status=1}}):B().fire({icon:"error",title:"접속 제한 실패 !",text:"알수없는 오류로 접속제한이 실패하였습니다.",toast:!0,position:"center-center",showConfirmButton:!1,timer:1500,timerProgressBar:!0,didOpen:e=>{e.addEventListener("mouseenter",B().stopTimer),e.addEventListener("mouseleave",B().resumeTimer)}})}))}))},active:function(e,t){B().fire({title:"회원 접근을 허용하시겠습니까?",text:"회원의 접근제한이 해제됩니다.",showCancelButton:!0,confirmButtonText:"해제",cancelButtonText:"취소"}).then((n=>{n.isConfirmed&&fetch("http://localhost:8087/java/member",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e.email,auth:1,status:2})}).then((e=>e.text())).then((e=>{"true"==e?B().fire({icon:"success",title:"접속 제한 해제 !",toast:!0,position:"center-center",showConfirmButton:!1,timer:1500,timerProgressBar:!0,didOpen:e=>{e.addEventListener("mouseenter",B().stopTimer),e.addEventListener("mouseleave",B().resumeTimer),this.userData[t].status=2}}):B().fire({icon:"error",title:"접속 제한 해제 실패 !",text:"알수없는 오류로 접속제한이 실패하였습니다.",toast:!0,position:"center-center",showConfirmButton:!1,timer:1500,timerProgressBar:!0,didOpen:e=>{e.addEventListener("mouseenter",B().stopTimer),e.addEventListener("mouseleave",B().resumeTimer)}})}))}))},cancelModify:function(){this.modifyData=[],this.isModify=!1}},watch:{currentPage:function(){this.rows=[];for(let e=(this.currentPage-1)*this.perPage;e<(this.currentPage-1)*this.perPage+this.perPage;e++){if(e>=this.userData.length)break;this.rows.push(this.userData[e])}},userData:function(){let e=Object.keys(this.userData).length;this.totalPage=e<=20?1:Math.ceil(e/this.perPage);for(let t=0;t<this.perPage;t++){if(Object.keys(this.userData).length<=t)break;console.log(t),this.rows.push(this.userData[t])}this.$forceUpdate()}},components:{Pagination:w.Z,Sort:k.Z,Filtering:x.Z,TableButton:T.Z,ModifyModal:S.Z,ExcelExport:M.Z}},E=n(89);const O=(0,E.Z)(j,[["render",b],["__scopeId","data-v-0782e714"]]);var L=O,_={data:function(){return{userData:[],perPage:20}},created:function(){fetch("http://localhost:8087/java/member").then((e=>e.json())).then((e=>{console.log(e),this.userData=e})).catch((e=>console.log(e)))},components:{UserTable:L}};const q=(0,E.Z)(_,[["render",c],["__scopeId","data-v-45ddacce"]]);var U=q}}]);
//# sourceMappingURL=152.138761db.js.map